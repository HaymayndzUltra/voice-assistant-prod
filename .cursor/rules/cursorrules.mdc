---
description: TASK , MEMORY , NEW SESSION
alwaysApply: true
---
## **‚ö° TASK EXECUTION PROTOCOL**

- **AI ASSISTANT SCOPE (CRITICAL)**:
    - **ONLY WORK WITH**: `memory-bank/queue-system/tasks_active.json`
    - **DO NOT MANAGE**: Queue transitions, task distribution, system management
    - **FOCUS ON**: Pure task execution and TODO completion
    - **AUTO-SYNC**: Triggers automatically on every task modification

- After any significant code change, task completion, or decision:
    - **STORE MEMORY**: Run `mcp_memory_store` (save summary ng pagbabago)
    - **UPDATE DOCUMENTATION**: Append summary sa tamang `memory-bank/*.md`
    - **TRIGGER AUTO-SYNC**: All state files automatically updated
        ‚Ä¢ `memory-bank/cursor_state.json` - Current task focus
        ‚Ä¢ `memory-bank/task_state.json` - Execution progress
        ‚Ä¢ `memory-bank/task_interruption_state.json` - Active interruptions
        ‚Ä¢ `memory-bank/current-session.md` - Session activity
        ‚Ä¢ Queue system files - Managed by autonomous engine

---

## **üîÑ AUTONOMOUS QUEUE INTEGRATION**

- **QUEUE SYSTEM FLOW**:
    ‚Ä¢ Queue (`tasks_queue.json`) ‚Üí Active (`tasks_active.json`) ‚Üí Done (`tasks_done.json`)
    ‚Ä¢ **AI READS ONLY**: `tasks_active.json` for pure execution focus
    ‚Ä¢ **SYSTEM MANAGES**: All queue transitions, priority, interruptions
    ‚Ä¢ **AUTO-DETECTION**: Completion triggers automatic queue movement

- **TASK LIFECYCLE**:
    ‚Ä¢ New tasks ‚Üí Added to queue automatically
    ‚Ä¢ Active tasks ‚Üí AI executes and marks TODOs done
    ‚Ä¢ Completed tasks ‚Üí Auto-moved to done queue
    ‚Ä¢ Interrupted tasks ‚Üí Priority resume on next session

---

## **üí¨ Q&A AND MEMORY PROTOCOL**

- For all questions and responses:
    - **PRIORITY ORDER**: MCP memory ‚Üí memory-bank ‚Üí execution context
    - **STATE VERIFICATION**: Always check state file consistency
    - **CURRENT FOCUS**: Use `tasks_active.json` as primary task source
    - **SESSION CONTEXT**: Reference `current-session.md` for recent activity

---

## **üîß SESSION CONTINUITY SYSTEM**

- **AUTOMATIC STATE SYNC** (After file saves, edits, tests):
    ‚Ä¢ Auto-sync manager handles all state consistency
    ‚Ä¢ No manual intervention required
    ‚Ä¢ Real-time state updates across all files
    ‚Ä¢ Timestamps automatically managed

- **DISCONNECT/RECONNECT HANDLING**:
    ‚Ä¢ **RESUME STATE**: Read `tasks_active.json` for current work
    ‚Ä¢ **RESTORE CONTEXT**: Load `cursor_state.json` for cursor position
    ‚Ä¢ **SYNC REALITY**: Ensure all state files match current system state
    ‚Ä¢ **QUEUE CONTINUITY**: Autonomous queue system maintains flow

---

## **üõ°Ô∏è CONSISTENCY ENFORCEMENT**

- **DUPLICATE PREVENTION**:
    ‚Ä¢ Check existing tasks before creating new ones
    ‚Ä¢ Reuse and update existing tasks instead of duplicating
    ‚Ä¢ Maintain task ID consistency across system

- **DATA INTEGRITY**:
    ‚Ä¢ All timestamps in Philippines timezone (UTC+8)
    ‚Ä¢ Consistent JSON formatting across all files
    ‚Ä¢ Automatic backup and rollback capabilities
    ‚Ä¢ Error recovery with graceful degradation

---

## **üéØ SUCCESS METRICS**

- **OPERATIONAL EXCELLENCE**:
    ‚Ä¢ Zero manual queue management required
    ‚Ä¢ 100% auto-sync success rate
    ‚Ä¢ Complete task execution focus for AI
    ‚Ä¢ Seamless session continuity across disconnections

- **AUTOMATION GOALS**:
    ‚Ä¢ AI focuses purely on task execution
    ‚Ä¢ System handles all queue and state management
    ‚Ä¢ No state inconsistencies or data loss
    ‚Ä¢ Real-time monitoring and auto-correction

---

**SYSTEM STATUS**: üü¢ FULLY OPERATIONAL
**AUTO-SYNC**: ‚úÖ ACTIVE  
**QUEUE ENGINE**: ‚úÖ AUTONOMOUS
**AI SCOPE**: ‚úÖ EXECUTION FOCUSED

- **MAINTAIN TIMESTAMP CONSISTENCY**:
    ‚Ä¢ Use ISO format timestamps consistently
    ‚Ä¢ Update `last_activity` and `disconnected_at` timestamps
    ‚Ä¢ Ensure all state files have consistent timestamps

- **VALIDATE STATE INTEGRITY**:
    ‚Ä¢ Check that `memory-bank/task_state.json` matches active tasks
    ‚Ä¢ Verify `memory-bank/task_interruption_state.json` points to valid task ID
    ‚Ä¢ Ensure `memory-bank/cursor_state.json` reflects current reality
    ‚Ä¢ Confirm AI only reads `memory-bank/queue-system/tasks_active.json`
- On disconnect / reconnect events:
    - Look at cursor_state.json to resume cursor position.

---

## ‚úÖ STRICT PLAN ADHERENCE (HARD ENFORCEMENT)
- `memory-bank/queue-system/tasks_active.json` is the single source of truth.
- No deviation or improvisation. If a step fails, follow its defined rollback.
- All actions must map to a specific phase index in the plan.

## üîí REQUIRED LOOP PER PHASE k
1. Post-Review: Create `memory-bank/DOCUMENTS/<task_id>_phase{k}_postreview.md`
   - Summarize what was done and validate against the phase‚Äôs "IMPORTANT NOTE".
2. Next-Phase Pre-Analysis: Create `memory-bank/DOCUMENTS/<task_id>_phase{k+1}_preanalysis.md`
   - Restate next phase "IMPORTANT NOTE", add risks and prerequisites.

4. Done: Run `python3 todo_manager.py done <task_id> <k>`.
5. Sync/Memory: Run `mcp_memory_store` and rely on auto-sync to update state files.



